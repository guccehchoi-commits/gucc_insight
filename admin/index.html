<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>GUCC Admin</title>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script>
    // CMS가 실행되기 전에 설정을 미리 정의하여 충돌을 막습니다.
    window.CMS_CONFIG = {
      backend: {
        name: "github",
        repo: "guccehchoi-commits/gucc_insight",
        branch: "master",
        base_url: "https://gucc-auth.gucc-ehchoi.workers.dev",
        auth_endpoint: "auth"
      },
      media_folder: "assets/images",
      public_folder: "/assets/images",
      collections: [{
        name: "posts",
        label: "포스트 등록",
        folder: "_posts",
        create: true,
        fields: [
          { label: "제목", name: "title", widget: "string" },
          { label: "본문", name: "body", widget: "markdown" }
        ]
      }]
    };

    // 설정이 중복으로 들어가는 것을 방지하기 위해 
    // 기존 설정 객체가 있다면 삭제하고 새로 시작합니다.
    document.addEventListener('DOMContentLoaded', () => {
      CMS.init({ config: window.CMS_CONFIG });
    });
  </script>
</body>
</html>
